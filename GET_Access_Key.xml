<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="f63fcb17-4da0-4c43-a1d3-daf699514a45" activeEnvironment="Default" name="获取access_key" resourceRoot="${projectDir}" soapui-version="5.1.2" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" id="d5023e2f-2462-44a0-8f87-677cacfa62ef" wadlVersion="http://wadl.dev.java.net/2009/02" name="https://passport.bilibili.com" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://account.bilibili.com</con:endpoint></con:endpoints><con:resource name="获取token" path="/api/oauth/getTmpToken" id="a4fc39bb-5a4f-4924-b225-94a3437387ff"><con:settings/><con:parameters><con:parameter><con:name>access_key</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>app_subid</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>target_appkey</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>appkey</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>sign</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>type</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>ts</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>callback</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>platform</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="token" id="310601ca-8806-4a05-9719-a06395aa479f" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="d92f0508-3e71-440f-bfa1-af3194a2e0b6" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>access_key</con:entry><con:entry>app_subid</con:entry><con:entry>target_appkey</con:entry><con:entry>appkey</con:entry><con:entry>sign</con:entry><con:entry>type</con:entry><con:entry>ts</con:entry><con:entry>callback</con:entry><con:entry>platform</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="登录" path="/api/login/v2" id="d1b9fa8f-aebe-43cc-88cc-96c49afa8f42"><con:settings/><con:parameters><con:parameter><con:name>userid</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>mode</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>captcha</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>pwd</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>app_subid</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>permission</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>appkey</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>sign</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>type</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>ts</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>callback</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>access_key</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>platform</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="login" id="e1499ec1-903d-4e06-ac3d-9f3d6c14cd87" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json; charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:v2="https://account.bilibili.com/api/login/v2">v2:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:v2="https://account.bilibili.com/api/login/v2">v2:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:v2="https://account.bilibili.com/api/login/v2">v2:Response</con:element></con:representation><con:request name="Request" id="99eaf0e6-e1d0-40e0-9f4b-58cb63c8930e" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://passport.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>userid</con:entry><con:entry>mode</con:entry><con:entry>captcha</con:entry><con:entry>pwd</con:entry><con:entry>app_subid</con:entry><con:entry>permission</con:entry><con:entry>appkey</con:entry><con:entry>sign</con:entry><con:entry>type</con:entry><con:entry>ts</con:entry><con:entry>callback</con:entry><con:entry>access_key</con:entry><con:entry>platform</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="获取密钥" path="/api/login/get_key" id="dae86b58-5e7e-4e15-8171-5530d181e929"><con:settings/><con:parameters><con:parameter><con:name>appkey</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>sign</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>ts</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>season_id</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>type</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="getkey" id="95eba902-f5b4-4345-8d1d-862ff28fd7bb" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json; charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:get="https://account.bilibili.com/api/login/get_key">get:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:get="https://account.bilibili.com/api/login/get_key">get:Response</con:element></con:representation><con:request name="Request" id="e2cb9a0e-7b7e-4ee2-ae86-a2f92f356661" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://passport.bilibili.com</con:endpoint><con:request/><con:originalUri>https://account.bilibili.com/api/login/get_key</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>appkey</con:entry><con:entry>sign</con:entry><con:entry>ts</con:entry><con:entry>season_id</con:entry><con:entry>type</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="读取用户信息" path="/api/myinfo" id="724bbb60-e748-4f36-a8ae-cefe440b130c"><con:settings/><con:parameters><con:parameter><con:name>appkey</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>sign</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>ts</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="myinfo" id="82ef8df0-41b9-4249-a69a-e9fddf10d187" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="b62bf6e6-47eb-438e-b77c-0ccf6a95f98c" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>appkey</con:entry><con:entry>sign</con:entry><con:entry>ts</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="根据mid读取用户card信息" path="/api/member/getCardByMid" id="ffdd4202-2879-413b-980a-1784bbf18aed"><con:settings/><con:parameters><con:parameter><con:name>appkey</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>sign</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>ts</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>mid</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="getcard" id="95b559fd-3487-4ce7-a6d8-14ad6de0b7ab" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="8c1af8d3-115e-4a68-963a-51949c517d8f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>appkey</con:entry><con:entry>sign</con:entry><con:entry>ts</con:entry><con:entry>mid</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="获取粉丝活跃度" path="/api/friend/getActivityFansId" id="51a1a86e-9df5-451f-905a-986036995179"><con:settings/><con:parameters><con:parameter><con:name>appkey</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>sign</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>ts</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>mid</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>page</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="getactive" id="c7e85057-875f-4189-bb27-8c0637871a3f" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="84b9aa1b-944f-43ff-b9fd-b498909b7c87" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>appkey</con:entry><con:entry>sign</con:entry><con:entry>ts</con:entry><con:entry>mid</con:entry><con:entry>page</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="设置用户标签" path="/api/tag/set" id="31d9a54b-6d12-42e9-b82b-fe514b154458"><con:settings/><con:parameters><con:parameter><con:name>appkey</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>sign</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>ts</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>tags</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="set" id="5315e16c-cc2b-4a61-b6db-662df6adc283" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json; charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:set="https://account.bilibili.com/api/tag/set">set:Response</con:element></con:representation><con:request name="Request" id="b3961005-b7ea-4f4e-b123-45b08e22a08a" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>appkey</con:entry><con:entry>sign</con:entry><con:entry>ts</con:entry><con:entry>tags</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="通过昵称批量获取用户信息" path="/api/member/getInfoByName" id="bebabc67-a816-41f3-999e-3f67579dc75b"><con:settings/><con:parameters><con:parameter><con:name>appkey</con:name><con:style>QUERY</con:style></con:parameter><con:parameter><con:name>sign</con:name><con:style>QUERY</con:style></con:parameter><con:parameter><con:name>ts</con:name><con:style>QUERY</con:style></con:parameter><con:parameter><con:name>uname</con:name><con:style>QUERY</con:style></con:parameter></con:parameters><con:method name="getinfo" id="791ddb42-fd73-4099-8ac4-5bfbeedc2ec7" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json; charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:get="https://account.bilibili.com/api/member/getInfoByName">get:Response</con:element></con:representation><con:request name="Request" id="a8f0006b-3e94-4798-8e0a-fd68082c3d01" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>appkey</con:entry><con:entry>sign</con:entry><con:entry>ts</con:entry><con:entry>uname</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="校验密码合法性" path="/api/reg/check_passport" id="9a32c0e9-0a76-41ef-8486-7d49c830beca"><con:settings/><con:parameters><con:parameter><con:name>passport</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>appkey</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>sign</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>type</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>ts</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>callback</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>access_key</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>platform</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="check_passport" id="86802a52-1a5e-470a-a3bf-f1c78fd2e8f4" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="7f0404c4-4775-4727-a1e9-e89964a73cff" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>passport</con:entry><con:entry>appkey</con:entry><con:entry>sign</con:entry><con:entry>type</con:entry><con:entry>ts</con:entry><con:entry>callback</con:entry><con:entry>access_key</con:entry><con:entry>platform</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="通过邮箱注册" path="/api/reg/regV3" id="5fffca48-7224-4a41-a8e8-ffdd1bc9b44b"><con:settings/><con:parameters><con:parameter><con:name>userid</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>userpwd</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>captcha</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="regv3" id="190b376a-2b20-43f3-b505-518b3516da45" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="d29792c9-6c6f-4ee1-aaf5-bbc0d3fd429f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>userid</con:entry><con:entry>userpwd</con:entry><con:entry>captcha</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="一键注册" path="/api/reg/regV2" id="71ab0019-c2f4-4867-a1ff-f5c73b5d304c"><con:settings/><con:parameters><con:parameter><con:name>captcha</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="regv2" id="0551b7e2-db3a-4f27-a759-e514297b4eb6" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="99584abd-c92f-43fa-ac99-78c4c7f3c61a" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>captcha</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="判断手机号是否可用" path="/api/reg/checkTel" id="6e1f2289-0daa-4da8-af65-87170836393f"><con:settings/><con:parameters><con:parameter><con:name>tel</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>country_id</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="checkTel" id="59632752-17e0-4cd5-8881-5bced8562b76" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="bad7e1f2-e13a-419d-a9db-d4fc296c7148" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>tel</con:entry><con:entry>country_id</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="发送手机验证码" path="/api/sms/sendCaptcha" id="b2bf6c01-8470-475b-bfaa-1deec03fa20c"><con:settings/><con:parameters><con:parameter><con:name>tel</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>country_id</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>reset_pwd</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>captcha</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="sendCaptcha" id="d633a43b-121d-449a-a317-ad55862ee856" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="b8f04794-4b23-4264-b644-af075ce994e9" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>tel</con:entry><con:entry>country_id</con:entry><con:entry>reset_pwd</con:entry><con:entry>captcha</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="校验手机验证码" path="/api/sms/checkCaptcha" id="cdc3b675-cc26-41a0-adc8-98529c88fb50"><con:settings/><con:parameters><con:parameter><con:name>tel</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>captcha</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>country_id</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>reset_pwd</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="checkCaptcha" id="22cdc063-f157-453a-8af6-dc44f42e5166" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="41d25687-8623-4e3c-b681-fa64c3bcf5e1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>tel</con:entry><con:entry>captcha</con:entry><con:entry>country_id</con:entry><con:entry>reset_pwd</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="注册用户" path="/api/reg/byTel" id="60b64930-b3d8-440d-bfff-774dcabd0759"><con:settings/><con:parameters><con:parameter><con:name>tel</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>uname</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>userpwd</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>country_id</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>captcha</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="byTel" id="f399c2d8-f890-4894-8880-a9e394df4751" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="507b387f-43b4-4d0e-b6c7-f7ab504dc5b1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>tel</con:entry><con:entry>uname</con:entry><con:entry>userpwd</con:entry><con:entry>country_id</con:entry><con:entry>captcha</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="多点登录" path="/login/sso" id="245e7c59-6387-4b7d-8c65-97df23b43724"><con:settings/><con:parameters><con:parameter><con:name>gourl</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="sso" id="66b8c69e-8c91-4f49-8f34-2881e62f56f1" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="3b33d388-0756-4b2e-b1a4-d215a0bcc1cd" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>gourl</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="重置密码" path="/api/member/reset" id="5bbb2f04-3021-4625-9de4-6a9a82d3ebbc"><con:settings/><con:parameters><con:parameter><con:name>tel</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>pwd</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>captcha</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="reset" id="f84d7be7-6a30-45b7-a8d7-03940f2d0bf8" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="c3485b47-66e6-4db1-98c1-097c3688a414" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>tel</con:entry><con:entry>pwd</con:entry><con:entry>captcha</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="授权登录" path="/login" id="44360914-1666-4259-93da-5b0c6d6d40f2"><con:settings/><con:parameters><con:parameter><con:name>appkey</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>api</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>sign</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="login" id="9be765b1-a993-4b4f-b8be-fa6a77691c1c" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="3b9a0f80-a553-4da8-9714-80ccf033d396" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>appkey</con:entry><con:entry>api</con:entry><con:entry>sign</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="读取用户授权信息" path="/api/account/info" id="ee9f3f94-069c-443a-8ec0-f40d8e72901c"><con:settings/><con:parameters><con:parameter><con:name>access_key</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="info" id="96a7f72f-9309-42c5-adc2-df709c460f6b" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="4ed1da8a-bddc-4e07-88e6-92ef3566db2b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>access_key</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="验证会话信息" path="/api/oauth" id="e0dd93a9-0257-487b-a5cf-d48ee3d4de89"><con:settings/><con:parameters><con:parameter><con:name>access_key</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="oauth" id="a3d78b3d-6586-43ea-94d4-5a423ea4f366" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="5da073af-925d-4b63-8a69-0f7a1d362648" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>access_key</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="延长access_token过期时间" path="/api/login/renewToken" id="4e9c0615-9fd4-44dd-bac2-40c1a11e265c"><con:settings/><con:parameters/><con:method name="renewToken" id="dc632577-4755-43c3-874f-4291af3f7458" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="b4492bcd-66ca-4223-aead-007093cdf5da" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="登出" path="/api/login/logout" id="b25e1ff3-2b01-4c6e-abbd-3eb471214bc0"><con:settings/><con:parameters/><con:method name="logout" id="66ffda94-5f28-46f2-9e84-9d52db878253" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="1f4da69c-eed9-4d87-bf24-59a4a5d8cb49" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="根据appid换取新的access_key" path="/api/oauth/exchangeToken" id="4c8ab50b-c5ab-4f39-975d-16ccda53e228"><con:settings/><con:parameters><con:parameter><con:name>access_key</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>app_subid</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="exchangeToken" id="73cd31f7-97ba-4d38-b672-59ebbf789206" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="5e5629b0-3fc7-44fa-b9b3-080ccba2b2a6" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>access_key</con:entry><con:entry>app_subid</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="根据accesss_key获取临时token" path="/api/oauth/getTmpToken" id="fc974114-7ea4-4ef2-80d4-6c14e46d381d"><con:settings/><con:parameters><con:parameter><con:name>access_key</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>app_subid</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>target_appkey</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="getTmpToken" id="070d0bb1-8542-4eb3-b84a-4a16cc8e5152" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="4c4b1271-d88b-42a4-8bca-389aeade146a" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>access_key</con:entry><con:entry>app_subid</con:entry><con:entry>target_appkey</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="根据临时token换取正式access_key" path="/api/oauth/exchangeByTmpToken" id="45e7a178-7f76-4a03-805b-32be6bcaa04f"><con:settings/><con:parameters><con:parameter><con:name>token</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>app_subid</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="exchangeByTmpToken" id="487154a0-3cf5-4267-8b68-c75d67a06ebf" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="0b9a09bc-97b1-4b04-9c47-4aae67f6502c" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>token</con:entry><con:entry>app_subid</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="手机绑定充值密码集成接口" path="/api/member/bindAndReset" id="7bda4a19-0a4c-42d4-aa19-0a6e4f619d0c"><con:settings/><con:parameters><con:parameter><con:name>tel</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>pwd</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>country_id</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>captcha</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="bindreset" id="0a51bfb4-2293-4051-bcf4-3d8543ee5fd6" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="754be09a-8261-49ae-88ff-78c55986997e" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>tel</con:entry><con:entry>pwd</con:entry><con:entry>country_id</con:entry><con:entry>captcha</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="登录日志" path="/api/login/log" id="1cbe665e-b983-4dca-b2d1-271566f30a70"><con:settings/><con:parameters><con:parameter><con:name>page</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>pagesize</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="log" id="7de9a49a-bced-4cc9-b5a4-d261f38ffead" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="07c7aca9-9d89-4ede-a63a-e053be88f532" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>page</con:entry><con:entry>pagesize</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="修改昵称" path="/api/member/updateUname" id="14754e3d-7114-4edb-a615-a3c0e568336f"><con:settings/><con:parameters><con:parameter><con:name>uname</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="updateUname" id="b759c3b5-7bfb-4540-8d3c-d988c6cf1a5b" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="5658d86a-fce4-416a-977e-f6b3ea88e6ff" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>uname</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="根据mid批量获取昵称" path="/api/acc/getInfoByMids" id="93cec2cd-1c7e-4682-8db6-351c579510b0"><con:settings/><con:parameters><con:parameter><con:name>mids</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="getinfoBymid" id="18698a5a-05b6-46e2-a680-6b45db80b917" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="65fee5ba-fcaa-4c33-aa0d-3882e5be7a7d" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>mids</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="获取domain白名单列表" path="/api/domain/whiteList" id="ed6d06a9-c18b-44f5-b778-39a63e2378bf"><con:settings/><con:parameters/><con:method name="Method 1" id="77d38664-35d8-4846-b5bf-092c7de55c22" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="7aec6f83-2f9a-4b64-8366-cf3d3c4f5ee8" mediaType="application/json"><con:settings/><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="设置密码问题" path="/api/member/updateUname" id="24cc6d0b-57d7-48ce-a983-6ff2d4256db6"><con:settings/><con:parameters><con:parameter><con:name>uname</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="updateUname" id="651b3dd8-cafa-4802-92b6-a8ce70e4518f" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="ae554b74-7ff0-4632-b683-0c8f03a724c0" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>uname</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="校验用户名合法性" path="/api/reg/check_user" id="ef4b03cd-c53e-46a8-b703-4c12d7ca6c00"><con:settings/><con:parameters><con:parameter><con:name>user</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>appkey</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>sign</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>type</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>ts</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>callback</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>access_key</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>platform</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="check_user" id="038f1573-5fea-414b-8b8b-0ded4a78d95c" method="GET"><con:settings/><con:parameters/><con:request name="Request" id="e9759269-bf00-4db8-82a6-c47a3b41a620" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://account.bilibili.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>user</con:entry><con:entry>appkey</con:entry><con:entry>sign</con:entry><con:entry>type</con:entry><con:entry>ts</con:entry><con:entry>callback</con:entry><con:entry>access_key</con:entry><con:entry>platform</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:testSuite id="bc22b16c-f9f1-4f54-b9d7-a6caa87bed14" name="common_testsuite"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="e3e4906b-683b-4460-8105-c86c0e9d5de1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="loginv2" searchProperties="true"><con:settings/><con:testStep type="groovy" name="assign" id="4f2428b4-02f1-42f8-8c59-d70271e44ed9"><con:settings/><con:config><script><![CDATA[import java.util.*
import java.security.MessageDigest
import java.net.URLEncoder
import rsa.App;

import com.eviware.soapui.support.types.StringToObjectMap
import groovy.json.JsonSlurper
import com.eviware.soapui.impl.wsdl.support.http.HttpClientSupport
import org.apache.http.impl.cookie.BasicClientCookie
import com.eviware.soapui.support.types.StringToStringMap

//计算时间戳
Date date = new Date()
def st_string = date.getTime()
st_string = st_string.toString()
st_string = st_string.substring(0,10)
//设置ts的时间戳 预先写入供后面的调用

testRunner.testCase.testSteps["testdata"].setPropertyValue('ts',st_string)

//===========================需要手工参与的地方=======================================
//1.设置data_list

//设置预读取的testdata里除sign以外的参数名字，用于计算md5
//def data_list = ['ts','appkey']

//测试专用的appkey
def appkey_str = '7d9f6f6fe2a898e8'
//测试专用appkey对应的appsecret
def appsecret_str = '4de2ccdbd9db69be0c2c6437bfe6eb69'

def params_list = []
log.info("获取秘钥")
//调用的case
def testcase_name = 'getkey'
def teststep_name = 'getkey'
//执行用例
def re = getContentOut(testcase_name,teststep_name,params_list)
//打印结果中的hash
log.info re
def a = re.key
def b = a.split('-----')[2]
log.info(b)
//login  4780461

def pwd_string = testRunner.testCase.testSteps["testdata"].getPropertyValue('pwd')
//字符串拼接
//def rsa_string = re.hash+pwd_string
def rsa_string = re.hash+pwd_string
//RSA加密
String publicKey = b;
String arg = rsa_string;
log.info rsa_string
App app = new App();
app.loadPublicKey(publicKey);
String encode = app.encrypt(app.getPublicKey(),arg);
log.info encode
//params_list1 = ['userid=nixuepeng','pwd='+encode]
testRunner.testCase.testSteps["testdata"].setPropertyValue('pwd',encode)

def data_list = ['ts','appkey','pwd','userid','mode','captcha','app_subid','app_subid','permission','type','callback','access_key','platform']

//排序
data_list = data_list.sort()


def n = 0
def sg_orgin_string = ''
def sg_md5_string = ''


//拼接字符串
while (n<data_list.size()){
	def getLocalPropValue = ''
	if(data_list[n] == 'appkey'){
		sg_orgin_string = sg_orgin_string + data_list[n] + '=' + java.net.URLEncoder.encode(appkey_str,'UTF-8') + '&' 
	}else{
		if( testRunner.testCase.testSteps["testdata"].getPropertyValue(data_list[n]) == ''){
			log.info('null')
		}else{
			getLocalPropValue = testRunner.testCase.testSteps["testdata"].getPropertyValue(data_list[n])
			sg_orgin_string = sg_orgin_string + data_list[n] + '=' + java.net.URLEncoder.encode(getLocalPropValue,'UTF-8') + '&'
		}
	}
	n = n + 1
}

def orgin_len = sg_orgin_string.size()
sg_orgin_string = sg_orgin_string[0..(orgin_len-2)]
//还原空格设置
sg_orgin_string = sg_orgin_string.replace('$',' ')

sg_orgin_string =  sg_orgin_string + appsecret_str
sg_md5_string = getMD5(sg_orgin_string)

log.info sg_orgin_string
log.info sg_md5_string

//把算出来的sign写入testdata
testRunner.testCase.testSteps["testdata"].setPropertyValue('sign',sg_md5_string)
//设置appkey
testRunner.testCase.testSteps["testdata"].setPropertyValue('appkey',appkey_str)
log.info(sg_md5_string)



//获取签名
def String getSign(TreeMap<String, String> paramsTreeMap, String appSecret) throws UnsupportedEncodingException {
   String signCalc = "";
   for (Map.Entry<String, String> entry : paramsTreeMap.entrySet()) {
       String key = entry.getKey(); // map中的key
       String value = "";
       value = String.valueOf(entry.getValue());
       signCalc = String.format("%s%s=%s&", signCalc, key, encodedFix(URLEncoder.encode(value, "UTF-8")), "&");
       log.info(signCalc)
   }
   if (signCalc.length() > 0) {
       signCalc = signCalc.substring(0, signCalc.length() - 1);
   }
   log.info(String.format("%s%s", signCalc, appSecret))
   signCalc = getMD5(String.format("%s%s", signCalc, appSecret));
   return signCalc;
}

    
def encodedFix(String encoded) {
   // required
   encoded = encoded.replace("+", "%20");
   encoded = encoded.replace("*", "%2A");
   encoded = encoded.replace("%7E", "~");
   encoded = encoded.replace("%2B", "%20");
	
   // optional
   encoded = encoded.replace("!", "%21");
   encoded = encoded.replace("(", "%28");
   encoded = encoded.replace(")", "%29");
   encoded = encoded.replace("'", "%27");
   return encoded;
}

//MD5算法
def getMD5(String source){
	MessageDigest md5 = MessageDigest.getInstance("MD5")
	md5.update(source.getBytes())
	byte[] digest = md5.digest()
	StringBuffer sb = new StringBuffer()
	digest.eachByte {
		 sb.append(String.format("%02x", it & 0xff)) 
	}
	return sb.toString()
}


//==============================================
//模拟请求
def getContentOut(String testcase_name,String teststep_name,List request_params){
	//找对应的case
	def testproject = testRunner.testCase.testSuite.project
	def testcase = testproject.testSuites['common_testsuite'].testCases[testcase_name]
	
	for(i in request_params){
		if(i.split('=')[0] == 'pwd'){
			i = i.substring(4)
			testcase.testSteps['testdata'].setPropertyValue('pwd',i)
		}else{
			testcase.testSteps['testdata'].setPropertyValue(i.split('=')[0],i.split('=')[1])
		}
	}

	def contextMap = new StringToObjectMap(context)
	def runner = testcase.run(contextMap,false)
	//获取测试的请求
	def testcase_stepcount = testcase.getTestStepCount() 
	def response_content = runner.getResults()[testcase_stepcount-1].getResponseContent()
	
     //还原设置参数
	tearDownInput(testcase_name,request_params)

	//还原cookie设置
	setCookies(testcase_name, teststep_name,'teardown')

     //把测试结果json化后传出去
	def slurper = new JsonSlurper()
	def re = slurper.parseText(response_content)
	
	return re
}
//清理数据
def tearDownInput(String testcase_name,List request_params){
	for(i in request_params){
		testRunner.testCase.testSuite.project.testSuites['common_testsuite'].testCases[testcase_name].testSteps['testdata'].setPropertyValue(i.split('=')[0],'')
		}
}
//设置coockies
def setCookies(String testcase_name,String teststep_name,String userid){
	//按用户名读取预置的cookie值
	def testproject = testRunner.testCase.testSuite.project
	def cookies_str = testproject.testSuites['common_testsuite'].testCases['cookie'].testSteps['user_cookie'].getPropertyValue(userid)
	def reqheaders = new StringToStringMap()
	reqheaders.put('Cookie',cookies_str)
	testproject.testSuites['common_testsuite'].getTestCaseByName(testcase_name).getTestStepByName(teststep_name).testRequest.setRequestHeaders(reqheaders)	
}]]></script></con:config></con:testStep><con:testStep type="properties" name="testdata" id="8f2aa9f6-61a2-405a-b5ba-82f85b066eef"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>userid</con:name><con:value/></con:property><con:property><con:name>mode</con:name><con:value/></con:property><con:property><con:name>captcha</con:name><con:value/></con:property><con:property><con:name>pwd</con:name><con:value/></con:property><con:property><con:name>app_subid</con:name><con:value/></con:property><con:property><con:name>permission</con:name><con:value/></con:property><con:property><con:name>appkey</con:name><con:value>7d9f6f6fe2a898e8</con:value></con:property><con:property><con:name>sign</con:name><con:value>b557f401eeec88831db1cd264472af14</con:value></con:property><con:property><con:name>type</con:name><con:value/></con:property><con:property><con:name>ts</con:name><con:value>1470918081</con:value></con:property><con:property><con:name>callback</con:name><con:value/></con:property><con:property><con:name>access_key</con:name><con:value/></con:property><con:property><con:name>platform</con:name><con:value/></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="ea88f0b1-6e9f-4d7f-ae83-720ffd0fe580"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>appkey</con:name><con:sourceType>appkey</con:sourceType><con:sourceStep>testdata</con:sourceStep><con:targetType>appkey</con:targetType><con:targetStep>login</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>sign</con:name><con:sourceType>sign</con:sourceType><con:sourceStep>testdata</con:sourceStep><con:targetType>sign</con:targetType><con:targetStep>login</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ts</con:name><con:sourceType>ts</con:sourceType><con:sourceStep>testdata</con:sourceStep><con:targetType>ts</con:targetType><con:targetStep>login</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>userid</con:name><con:sourceType>userid</con:sourceType><con:sourceStep>testdata</con:sourceStep><con:targetType>userid</con:targetType><con:targetStep>login</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>pwd</con:name><con:sourceType>pwd</con:sourceType><con:sourceStep>testdata</con:sourceStep><con:targetType>pwd</con:targetType><con:targetStep>login</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>mode</con:name><con:sourceType>mode</con:sourceType><con:sourceStep>testdata</con:sourceStep><con:targetType>mode</con:targetType><con:targetStep>login</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>captcha</con:name><con:sourceType>captcha</con:sourceType><con:sourceStep>testdata</con:sourceStep><con:targetType>captcha</con:targetType><con:targetStep>login</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>app_subid</con:name><con:sourceType>app_subid</con:sourceType><con:sourceStep>testdata</con:sourceStep><con:targetType>app_subid</con:targetType><con:targetStep>login</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>permission</con:name><con:sourceType>permission</con:sourceType><con:sourceStep>testdata</con:sourceStep><con:targetType>permission</con:targetType><con:targetStep>login</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>type</con:name><con:sourceType>type</con:sourceType><con:sourceStep>testdata</con:sourceStep><con:targetType>type</con:targetType><con:targetStep>login</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>callback</con:name><con:sourceType>callback</con:sourceType><con:sourceStep>testdata</con:sourceStep><con:targetType>callback</con:targetType><con:targetStep>login</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>access_key</con:name><con:sourceType>access_key</con:sourceType><con:sourceStep>testdata</con:sourceStep><con:targetType>access_key</con:targetType><con:targetStep>login</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>platform</con:name><con:sourceType>platform</con:sourceType><con:sourceStep>testdata</con:sourceStep><con:targetType>platform</con:targetType><con:targetStep>login</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="login" id="ff827ef2-e2da-4270-ba2b-74bb9ff2b8e8"><con:settings/><con:config service="https://passport.bilibili.com" resourcePath="/api/login/v2" methodName="login" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="login" id="99eaf0e6-e1d0-40e0-9f4b-58cb63c8930e" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Cookie" value="" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://passport.bilibili.com</con:endpoint><con:request/><con:originalUri>https://account.bilibili.com/api/login/v2</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="sign" value="b557f401eeec88831db1cd264472af14"/>
  <con:entry key="pwd" value="aQX5BVEmUCVaAxsjzdHW1ed3qSPxLdA2l2J0UKQueJIZ6fV6rHKLi6igxvyNE3a/4JcmYg1kN71G fY0fqZl9q12FJNPn3oCaKne+oMhkgZ7lyO21QuzzYbYWKeNNk+cE2JWbOXhKmMqan0o3BYvdJuSn dh67SIrncAtXDMmSxI4= "/>
  <con:entry key="ts" value="1470918081"/>
  <con:entry key="userid" value="18516254259"/>
  <con:entry key="appkey" value="7d9f6f6fe2a898e8"/>
</con:parameters><con:parameterOrder><con:entry>userid</con:entry><con:entry>mode</con:entry><con:entry>captcha</con:entry><con:entry>pwd</con:entry><con:entry>app_subid</con:entry><con:entry>permission</con:entry><con:entry>appkey</con:entry><con:entry>sign</con:entry><con:entry>type</con:entry><con:entry>ts</con:entry><con:entry>callback</con:entry><con:entry>access_key</con:entry><con:entry>platform</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>4f2428b4-02f1-42f8-8c59-d70271e44ed9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="0458f4bc-7335-4593-acce-925baaaf099f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getkey" searchProperties="true"><con:settings/><con:testStep type="groovy" name="tssign" id="6ac117ca-bd2f-4f24-880f-c2444c30f650"><con:settings/><con:config><script>import java.util.*
import java.security.MessageDigest
import java.net.URLEncoder

//计算时间戳
Date date = new Date()
def st_string = date.getTime()
st_string = st_string.toString()
st_string = st_string.substring(0,10)
//设置ts的时间戳 预先写入供后面的调用
testRunner.testCase.testSteps["testdata"].setPropertyValue('ts',st_string)

//===========================需要手工参与的地方=======================================
//1.设置data_list

//设置预读取的testdata里除sign以外的参数名字，用于计算md5
def data_list = ['ts','appkey']
//def data_list = ['ts','appkey']
//测试专用的appkey
def appkey_str = '7d9f6f6fe2a898e8'
//测试专用appkey对应的appsecret
def appsecret_str = '4de2ccdbd9db69be0c2c6437bfe6eb69'

//修改list按字母排序
data_list = data_list.sort()

def n = 0
def sg_orgin_string = ''
def sg_md5_string = ''

while (n&lt;data_list.size()){
	def getLocalPropValue = ''
	if(data_list[n] == 'appkey'){
		sg_orgin_string = sg_orgin_string + data_list[n] + '=' + java.net.URLEncoder.encode(appkey_str,'UTF-8') + '&amp;' 
	}else if(n == (data_list.size-1)){
		getLocalPropValue = testRunner.testCase.testSteps["testdata"].getPropertyValue(data_list[n])
		sg_orgin_string = sg_orgin_string + data_list[n] + '=' + java.net.URLEncoder.encode(getLocalPropValue,'UTF-8')
	}else{
		getLocalPropValue = testRunner.testCase.testSteps["testdata"].getPropertyValue(data_list[n])
		sg_orgin_string = sg_orgin_string + data_list[n] + '=' + java.net.URLEncoder.encode(getLocalPropValue,'UTF-8') + '&amp;'
	}
	n = n + 1
}

sg_orgin_string =  sg_orgin_string + appsecret_str
log.info(sg_orgin_string)
sg_md5_string = getMD5(sg_orgin_string)
log.info (sg_md5_string)
//把算出来的sign写入testdata
testRunner.testCase.testSteps["testdata"].setPropertyValue('sign',sg_md5_string)
//设置appkey
testRunner.testCase.testSteps["testdata"].setPropertyValue('appkey',appkey_str)


//get md5
//=============================
def getMD5(String source){
	MessageDigest md5 = MessageDigest.getInstance("MD5")
	md5.update(source.getBytes())
	byte[] digest = md5.digest()
	StringBuffer sb = new StringBuffer()
	digest.eachByte {
		 sb.append(String.format("%02x", it &amp; 0xff)) 
	}
	return sb.toString()
}
</script></con:config></con:testStep><con:testStep type="properties" name="testdata" id="c5313ced-e143-4dc5-ae42-84f443958691"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>appkey</con:name><con:value>7d9f6f6fe2a898e8</con:value></con:property><con:property><con:name>sign</con:name><con:value>9f7c6eddc050ca3361c4cd634a9b4d22</con:value></con:property><con:property><con:name>ts</con:name><con:value>1470918081</con:value></con:property><con:property><con:name>season_id</con:name><con:value/></con:property><con:property><con:name>type</con:name><con:value/></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="5012a346-04c7-430e-a029-dfb201eb8c68"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>appkey</con:name><con:sourceType>appkey</con:sourceType><con:sourceStep>testdata</con:sourceStep><con:targetType>appkey</con:targetType><con:targetStep>getkey</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ts</con:name><con:sourceType>ts</con:sourceType><con:sourceStep>testdata</con:sourceStep><con:targetType>ts</con:targetType><con:targetStep>getkey</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>sign</con:name><con:sourceType>sign</con:sourceType><con:sourceStep>testdata</con:sourceStep><con:targetType>sign</con:targetType><con:targetStep>getkey</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>type</con:name><con:sourceType>type</con:sourceType><con:sourceStep>testdata</con:sourceStep><con:targetType>type</con:targetType><con:targetStep>getkey</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>season_id</con:name><con:sourceType>season_id</con:sourceType><con:sourceStep>testdata</con:sourceStep><con:targetType>season_id</con:targetType><con:targetStep>getkey</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="getkey" id="73adb887-ce77-46c8-a3b3-276a925ccaa7"><con:settings/><con:config service="https://passport.bilibili.com" resourcePath="/api/login/get_key" methodName="getkey" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getkey" id="e2cb9a0e-7b7e-4ee2-ae86-a2f92f356661" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Cookie" value="" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://passport.bilibili.com</con:endpoint><con:request/><con:originalUri>https://account.bilibili.com/api/login/get_key</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="sign" value="9f7c6eddc050ca3361c4cd634a9b4d22"/>
  <con:entry key="ts" value="1470918081"/>
  <con:entry key="appkey" value="7d9f6f6fe2a898e8"/>
</con:parameters><con:parameterOrder><con:entry>appkey</con:entry><con:entry>sign</con:entry><con:entry>ts</con:entry><con:entry>season_id</con:entry><con:entry>type</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>6ac117ca-bd2f-4f24-880f-c2444c30f650</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="080a1665-b9a6-48c6-ad19-1866b5944bab" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="cookie" searchProperties="true"><con:settings/><con:testStep type="properties" name="user_cookie" id="cc3636ad-7eb0-4639-aa5a-5c406d012d29"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>user001</con:name><con:value>DedeUserID=15663561;DedeUserID__ckMd5=215d9245b74d109f;SESSDATA=f7ae1726%2C1447838173%2C75dfa3b4;_dfcaptcha=a5f6f6425d29132b63dfad61bd91f584;sid=d4lo0f8a	;</con:value></con:property><con:property><con:name>user002</con:name><con:value>DedeUserID=18456254;DedeUserID__ckMd5=3b9b211782a95697;SESSDATA=d2c7ce9b%2C1447917546%2Cf23702f6;</con:value></con:property><con:property><con:name>user_super001</con:name><con:value>DedeUserID=5746800; DedeUserID__ckMd5=7ee132bc92fc7305; SESSDATA=c0dcae73%2C1445863602%2C60b6d178;</con:value></con:property><con:property><con:name>teardown</con:name><con:value/></con:property><con:property><con:name>user005</con:name><con:value>DedeUserID=17191256; DedeUserID__ckMd5=3584ad65e4e5417e; SESSDATA=dfee6279%2C1447842876%2C0c5974c6;_dfcaptcha=08de96f86edbed0f600fe5d20536ec84;sid=le4i1bqk;</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="properties" name="access_key" id="b85afcaf-a0e8-4ddd-b9d6-0d1ed4ce325d"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>access001</con:name><con:value>access_key=cc98358c7cf3a8da570f0bc26ed325ff</con:value></con:property></con:properties></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="e3608ad1-a993-416c-a8e4-d34a5cc49415" name="get_access_key"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="8fdc719e-735b-426e-b73c-12f7fb59848d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="get_access_key" searchProperties="true"><con:settings/><con:testStep type="groovy" name="process" id="c4ea4152-70d9-4d83-9a7c-9fc9b17eb3db"><con:settings/><con:config><script>import com.eviware.soapui.support.types.StringToObjectMap
import groovy.json.JsonSlurper
import com.eviware.soapui.impl.wsdl.support.http.HttpClientSupport
import org.apache.http.impl.cookie.BasicClientCookie
import com.eviware.soapui.support.types.StringToStringMap
import rsa.App;

def params_list1 = ['userid=18516254259','pwd=111111']
//调用的case
def testcase_name1 = 'loginv2'
def teststep_name1 = 'login'

//执行用例
def re = getContentOut(testcase_name1,teststep_name1,params_list1)
log.info(re)
//校验返回值
assert(re.code == 0)
log.info('access_key：'+re.access_key)
//==================================
//SendMsg_ByName 根据用户昵称发送消息或者获取聊天roomid
//输入参 username  用户的昵称如“格格”
//输入参 choice 选择项 若为a则返回rid，若为bs则直 接对用户发送私信, c 返回mid
//输入参 msg_str 私信内容
//u_name 使用的用户在cookies预设的name
//返回值 为rid
//==================================
def SendMsg_ByName(String username,String choice,String msg_str,String u_name){
	params_list_contact = ['page_size=20','page_no=1']
	testcase_name_contact = 'msg_querycontact'
	teststep_name_contact = 'querycontact'
	setCookies(testcase_name_contact,teststep_name_contact ,u_name)
	setaptcha(u_name,params_list_contact)
	
	def re_contact = getContentOut(testcase_name_contact,teststep_name_contact,params_list_contact)
	
	def user_size = re_contact.data.size
	def user_id = 0
	for (i in (0..(user_size - 1))){
		if (re_contact.data[i].uname == username){
			user_id = i
			break
			}
		
		if(i == user_size -1){
			assert(  '未在联系人列表中找到对应的用户')
			}
		}

		if(choice == 'c'){
			return re_contact.data[user_id].mid
		}

		//根据mid获取roomid
		params_list_double = ['mid=' + re_contact.data[user_id].mid]
		testcase_name_double = 'msg_querydouble'
		teststep_name_double = 'querydouble'
		log.info params_list_double
		setCookies(testcase_name_double,teststep_name_double ,u_name)
		setaptcha(u_name,params_list_double)
		
		def re_queryroom = getContentOut(testcase_name_double,teststep_name_double,params_list_double)

		if(choice == 'a'){
			return re_queryroom.data.rid
		}
		else{
			log.info 'send msg'
			params_list_send = ['rid=' + re_queryroom.data.rid,'msg=' + msg_str]
			setCookies('msg_send','send',u_name)
			setaptcha(u_name,params_list_send)
			def re_sendmsg = getContentOut('msg_send','send',params_list_send)
			return re_sendmsg
		}
}




//==================封装公共调用函数==============================

//==================================
//getContentOut 模拟请求
//输入参 testcase_name  testcase在testsuite中的名字
//输入参 teststep_name  主teststep在testcase中的名字
//输入参 request_params list的形式设置准备请求参数 eg： ['oid=1','type=1','message=233333']
//返回值为该请求获取的返回正文content
//==================================
def getContentOut(String testcase_name,String teststep_name,List request_params){
	//照对应的case
	def testproject = testRunner.testCase.testSuite.project
	def testcase = testproject.testSuites['common_testsuite'].testCases[testcase_name]
	
	for(i in request_params){
		testcase.testSteps['testdata'].setPropertyValue(i.split('=')[0],i.split('=')[1])
	}

	def contextMap = new StringToObjectMap(context)
	def runner = testcase.run(contextMap,false)
	//获取测试的请求
	def testcase_stepcount = testcase.getTestStepCount() 
	def response_content = runner.getResults()[testcase_stepcount-1].getResponseContent()
	log.info response_content
     //还原设置参数
	tearDownInput(testcase_name,request_params)

	//还原cookie设置
	setCookies(testcase_name, teststep_name,'teardown')

     //把测试结果json化后传出去
	def slurper = new JsonSlurper()
	def re = slurper.parseText(response_content)
	
	return re
}

//====================================
//tearDownInput 还原参数设置
//输入参 testcase_name  testcase在testsuite中的名字
//输入参 request_params list的形式设置准备请求参数 eg： ['oid=1','type=1','message=233333']
//返回值 无
//====================================
def tearDownInput(String testcase_name,List request_params){
	for(i in request_params){
		testRunner.testCase.testSuite.project.testSuites['common_testsuite'].testCases[testcase_name].testSteps['testdata'].setPropertyValue(i.split('=')[0],'')
		}
}

//====================================
//setCookies 设置cookies
//输入参 testcase_name  testcase在testsuite中的名字
//输入参 teststep_name  需要写入cookie的请求所在teststep名字
//输入参 userid 固定账号1 user001    账号2user002   高权限账号user_super001  还原操作 teardown
//返回值 无
//====================================
def setCookies(String testcase_name,String teststep_name,String userid){
	//按用户名读取预置的cookie值
	def testproject = testRunner.testCase.testSuite.project
	def cookies_str = testproject.testSuites['common_testsuite'].testCases['cookie'].testSteps['user_cookie'].getPropertyValue(userid)
	def reqheaders = new StringToStringMap()
	reqheaders.put('Cookie',cookies_str)
	testproject.testSuites['common_testsuite'].getTestCaseByName(testcase_name).getTestStepByName(teststep_name).testRequest.setRequestHeaders(reqheaders)	
}

//====================================
//getCaptcha 设置Captcha
//输入参 testcase_name  testcase在testsuite中的名字
//输入参 teststep_name  需要写入cookie的请求所在teststep名字
//输入参 userid 固定账号1 user001    账号2user002   高权限账号user_super001 
//返回值 无
//====================================
//====================================
def setaptcha(String userid,List prams_list){
	//按用户名读取预置的cookie值
	def testproject = testRunner.testCase.testSuite.project
	def cookies_str = testproject.testSuites['common_testsuite'].testCases['cookie'].testSteps['user_cookie'].getPropertyValue(userid)
	
	def values = cookies_str.split(';')
	
	for(i in (0..(values.size()-1))){
		if(values[i].split('=')[0] == '_dfcaptcha') {
			prams_list.add('captcha=' + values[i].split('=')[1])
			return prams_list
		}
	}
	
}

</script></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>c4ea4152-70d9-4d83-9a7c-9fc9b17eb3db</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:requirements/><con:properties/><con:wssContainer/><con:databaseConnectionContainer/><con:oAuth2ProfileContainer/><con:reporting><con:xmlTemplates/><con:parameters/></con:reporting><con:sensitiveInformation/></con:soapui-project>